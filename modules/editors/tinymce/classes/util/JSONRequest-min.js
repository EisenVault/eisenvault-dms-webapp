define("tinymce/util/JSONRequest",["tinymce/util/JSON","tinymce/util/XHR","tinymce/util/Tools"],function(d,c,b){var e=b.extend;function a(f){this.settings=e({},f);this.count=0}a.sendRPC=function(f){return new a().send(f)};a.prototype={send:function(h){var g=h.error,f=h.success;h=e(this.settings,h);h.success=function(j,i){j=d.parse(j);if(typeof(j)=="undefined"){j={error:"JSON Parse error."}}if(j.error){g.call(h.error_scope||h.scope,j.error,i)}else{f.call(h.success_scope||h.scope,j.result)}};h.error=function(j,i){if(g){g.call(h.error_scope||h.scope,j,i)}};h.data=d.serialize({id:h.id||"c"+(this.count++),method:h.method,params:h.params});h.content_type="application/json";c.send(h)}};return a});