define("tinymce/html/Writer",["tinymce/html/Entities","tinymce/util/Tools"],function(c,a){var b=a.makeMap;return function(h){var f=[],d,e,g,i,j;h=h||{};d=h.indent;e=b(h.indent_before||"");g=b(h.indent_after||"");i=c.getEncodeFunc(h.entity_encoding||"raw",h.entities);j=h.element_format=="html";return{start:function(o,n,r){var p,m,k,q;if(d&&e[o]&&f.length>0){q=f[f.length-1];if(q.length>0&&q!=="\n"){f.push("\n")}}f.push("<",o);if(n){for(p=0,m=n.length;p<m;p++){k=n[p];f.push(" ",k.name,'="',i(k.value,true),'"')}}if(!r||j){f[f.length]=">"}else{f[f.length]=" />"}if(r&&d&&g[o]&&f.length>0){q=f[f.length-1];if(q.length>0&&q!=="\n"){f.push("\n")}}},end:function(k){var l;f.push("</",k,">");if(d&&g[k]&&f.length>0){l=f[f.length-1];if(l.length>0&&l!=="\n"){f.push("\n")}}},text:function(l,k){if(l.length>0){f[f.length]=k?l:i(l)}},cdata:function(k){f.push("<![CDATA[",k,"]]>")},comment:function(k){f.push("<!--",k,"-->")},pi:function(k,l){if(l){f.push("<?",k," ",l,"?>")}else{f.push("<?",k,"?>")}if(d){f.push("\n")}},doctype:function(k){f.push("<!DOCTYPE",k,">",d?"\n":"")},reset:function(){f.length=0},getContent:function(){return f.join("").replace(/\n$/,"")}}}});